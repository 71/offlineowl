parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function o(dest,source){Object.keys(source).forEach(function(key){if(key==="default"||key==="__esModule"){return}Object.defineProperty(dest,key,{enumerable:true,get:function get(){return source[key]}})});return dest}var j,b={};!function(e,t){var n;"object"==typeof b?b=t():"function"==typeof j&&j.amd?j("ricochet",[],t):"object"==typeof b?(n=t(),b.ricochet=n):e.ricochet=t()}(window,function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});const s=n(3),i=n(2);t.ObservableSymbol=s.default,t.h=function(e,n,...s){let c,l,u=[];const b={subscriptions:u,disposeImplicitly:!n||!n.noimplicitdispose,destroy:e=>i.destroy(c,e)};r.push(u);try{if("string"==typeof e){const i=document.createElement(e),r=n;if(null!=r){for(const e in r){let n=null,s=!1;const o=r[e],c=null!=o&&void 0!==o[t.ObservableSymbol]?o[t.ObservableSymbol]():void 0,b="className"===e||"class"===e?e=>{Array.isArray(e)?e=e.join(" "):"object"==typeof e&&(e=Object.keys(e).filter(t=>e[t]).map(t=>e[t].toString()).join(" ")),i.className=e}:"style"===e?e=>{if(null!=n){for(let e=0;e<n.length;e++)n[e].unsubscribe();n.length=0}if("object"!=typeof e)return i.setAttribute("style",""+e);for(const s in e){const r=e[s],o=r[t.ObservableSymbol]&&r[t.ObservableSymbol]();o?(null==n&&(n=void 0===c?u:[]),n.push(o.subscribe(e=>i.style[s]=e))):i.style[s]=r}null==n||s||(u.push({unsubscribe(){n.forEach(e=>e.unsubscribe())}}),s=!0)}:"ref"===e?e=>{l=e}:t=>{i[e]=t};void 0!==c?u.push(c.subscribe(b)):b(o)}null!=r.children&&(s||(s=[])).unshift(r.children)}null!=s&&s.length>0&&o(i,s,u),c=Object.assign(i,b)}else{null!=s&&s.length>0&&(null==n?n={children:s}:null==n.children?n.children=s:n.children.push(...s)),"ref"in n&&(l=n.ref,delete n.ref);const t=e(n);if(null==t)throw new Error("Element returned by component was null.");for(const e in b)e in t||(t[e]=b[e]);u=t.subscriptions,c=t}if(n&&n.connect){const e=u.push.bind(u);if(Array.isArray(n.connect))for(const t of n.connect)("function"==typeof t?t:t.connect)(c,e);else("function"==typeof n.connect?n.connect:n.connect.connect)(c,e)}null!=l&&l(c)}finally{r.pop()}return c};const r=window.__ricochet_ctx_subscriptions||(window.__ricochet_ctx_subscriptions=[]);function o(e,n,s){!function n(o,c,l,u=!0){if(null==o||!1===o)return;const b=o[t.ObservableSymbol]?o[t.ObservableSymbol]():"function"==typeof o.subscribe?o:void 0;if(void 0===b){if("function"!=typeof o.render){if(Array.isArray(o)){if(0===o.length)return;for(let e=o.length-1;e>0;e--){const t=[void 0];n(o[e],t,l),void 0!==t[0]&&(l=t)}n(o[0],c,l)}else c[0]=e.insertBefore(o instanceof Node?o:new Text(o.toString()),l[0]),i.DestroyableElementSubscription.attach(c[0],s);}else o.render(e,c,l,function(e,t,i){r.push(s);try{n(e,t,i)}finally{r.pop()}});}else if(u){let e=!0,t=!0;const o={next:t=>{e&&(i.destroyRange(c[0],l[0]),c[0]=void 0),r.push(s);try{n(t,c,l,!1)}finally{r.pop()}(e=void 0!==c[0])||(c[0]=l[0])},complete(){const e=s.indexOf(u);-1===e?t=!1:s.splice(e,1)}},u=b.subscribe(o);t&&s.push(u)}}(n,[void 0],[void 0],!0)}t.attach=function e(...t){const n=Array.isArray(this)?this:r[r.length-1];if(void 0===n)throw new Error("`attach` can only be called in a component initializer.");for(let s=0;s<t.length;s++){const e=t[s];e instanceof Node&&(t[s]=new i.DestroyableElementSubscription(e,!0))}return n.push(...t),e.bind(n)},t.mount=function(e,n){if(void 0===n){const t=[];return o(n,e,t),{unsubscribe(){for(let e=0;e<t.length;e++)t[e].unsubscribe();t.length=0}}}let s=null;if(e[t.ObservableSymbol]().subscribe(e=>{const t=document.createElement("div"),n=[];if(o(t,e,n),1!==t.childElementCount)throw new Error("A mounted node must render exactly one element.");null!=s&&s.replaceWith(t.firstElementChild),s=t.firstElementChild;for(let s=0;s<n.length;s++)n[s].unsubscribe();n.length=0}),null==s)throw new Error("A mounted node must render exactly one element when it is subscribed to.");return s};class c{constructor(e,n){this.type=e,this.opts=n,this.elements=new Set,this.observers=new Set;const s=this.observers;this.eventListener=function(e){for(const t of s)("function"==typeof t?t:t.next)(e)},this[t.ObservableSymbol]=this[t.ObservableSymbol].bind(this),this.subscribe=this.subscribe.bind(this),this.connect=this.connect.bind(this)}[t.ObservableSymbol](){return this}subscribe(e){if(0===this.observers.size)for(const t of this.elements)t.addEventListener(this.type,this.eventListener,this.opts);return this.observers.add(e),{unsubscribe:()=>{if(this.observers.delete(e)&&0===this.observers.size)for(const e of this.elements)e.removeEventListener(this.type,this.eventListener,this.opts)}}}connect(e,t){this.elements.add(e),e.addEventListener(this.type,this.eventListener,this.opts),t({unsubscribe:()=>{this.elements.delete(e),e.removeEventListener(this.type,this.eventListener,this.opts)}})}}t.eventListener=function(e,t){return new c(e,t)};class l{constructor(e){this.input=e,this.eventListener=function(){e.next(this.value)},this.connect=this.connect.bind(this)}connect(e,n){e.addEventListener("change",this.eventListener),n(this.input[t.ObservableSymbol]().subscribe(t=>e.value=t),{unsubscribe:()=>e.removeEventListener("change",this.eventListener)})}}t.valueBinder=function(e){return new l(e)}},function(e,t,n){function s(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return s})},function(e,t,n){function s(e,t){if(null===e&&console.error("Bug detected: attempting to destroy a null node."),e.remove(),!e.disposeImplicitly&&!t)return;if(null==e.subscriptions)return;const n=e.subscriptions.splice(0);for(let s=0;s<n.length;s++)n[s].unsubscribe();e.dispatchEvent(new Event("destroy")),null!=e.ondestroy&&e.ondestroy()}Object.defineProperty(t,"__esModule",{value:!0}),n(0),t.destroy=s,t.destroyRange=function(e,t){if(null!=e&&t!==e){if(null==t){const t=e.parentElement;if(null==t){for(;null!=e;){const t=e.nextSibling;s(e,!1),e=t}return}for(;t.lastChild!==e;)s(t.lastChild,!1)}else for(;t.previousSibling!==e;)s(t.previousSibling,!1);s(e,!1)}},t.BuiltinObservable=class{constructor(){this.observers=new Set,this.isClosed=!1}get closed(){return this.isClosed}subscribe(e){if(!this.isClosed)return this.observers.add(e),1===this.observers.size&&this.subscribeToDependencies(),new class{constructor(e,t){this.obs=e,this.observer=t}unsubscribe(){const e=this.obs;e.observers.delete(this.observer)&&0===e.observers.size&&e.unsubscribeFromDependencies()}}(this,e)}next(e){this.observers.forEach(function(e){"object"==typeof e?e.next(this):e(this)},e)}complete(){0!==this.observers.size&&(this.isClosed=!0,this.observers.forEach(e=>"object"==typeof e&&e.complete()),this.observers.clear(),this.unsubscribeFromDependencies())}},t.SetRemovalSubscription=class{constructor(e,t){this.set=e,this.observer=t,e.add(t)}unsubscribe(){this.set.delete(this.observer)}};class i{constructor(e,t){this.element=e,this.dispose=t}unsubscribe(){s(this.element,this.dispose)}static attach(e,t,n=!1){"object"==typeof e.subscriptions&&t.push(new i(e,n))}}t.DestroyableElementSubscription=i},function(e,t,n){n.r(t),function(e,s){var i,r=n(1);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:s;var o=Object(r.a)(i);t.default=o}.call(this,n(4),n(5)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}])});var k,d={};!function(e,t){var s;"object"==typeof d?d=t():"function"==typeof k&&k.amd?k("ricochet",[],t):"object"==typeof d?(s=t(),d.ricochet=s):e.ricochet=t()}(window,function(){return function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=6)}([function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0});const n=s(3),i=s(2);t.ObservableSymbol=n.default,t.h=function(e,s,...n){let c,u,l=[];const b={subscriptions:l,disposeImplicitly:!s||!s.noimplicitdispose,destroy:e=>i.destroy(c,e)};r.push(l);try{if("string"==typeof e){const i=document.createElement(e),r=s;if(null!=r){for(const e in r){let s=null,n=!1;const o=r[e],c=null!=o&&void 0!==o[t.ObservableSymbol]?o[t.ObservableSymbol]():void 0,b="className"===e||"class"===e?e=>{Array.isArray(e)?e=e.join(" "):"object"==typeof e&&(e=Object.keys(e).filter(t=>e[t]).map(t=>e[t].toString()).join(" ")),i.className=e}:"style"===e?e=>{if(null!=s){for(let e=0;e<s.length;e++)s[e].unsubscribe();s.length=0}if("object"!=typeof e)return i.setAttribute("style",""+e);for(const n in e){const r=e[n],o=r[t.ObservableSymbol]&&r[t.ObservableSymbol]();o?(null==s&&(s=void 0===c?l:[]),s.push(o.subscribe(e=>i.style[n]=e))):i.style[n]=r}null==s||n||(l.push({unsubscribe(){s.forEach(e=>e.unsubscribe())}}),n=!0)}:"ref"===e?e=>{u=e}:t=>{i[e]=t};void 0!==c?l.push(c.subscribe(b)):b(o)}null!=r.children&&(n||(n=[])).unshift(r.children)}null!=n&&n.length>0&&o(i,n,l),c=Object.assign(i,b)}else{null!=n&&n.length>0&&(null==s?s={children:n}:null==s.children?s.children=n:s.children.push(...n)),"ref"in s&&(u=s.ref,delete s.ref);const t=e(s);if(null==t)throw new Error("Element returned by component was null.");for(const e in b)e in t||(t[e]=b[e]);l=t.subscriptions,c=t}if(s&&s.connect){const e=l.push.bind(l);if(Array.isArray(s.connect))for(const t of s.connect)("function"==typeof t?t:t.connect)(c,e);else("function"==typeof s.connect?s.connect:s.connect.connect)(c,e)}null!=u&&u(c)}finally{r.pop()}return c};const r=window.__ricochet_ctx_subscriptions||(window.__ricochet_ctx_subscriptions=[]);function o(e,s,n){!function s(o,c,u,l=!0){if(null==o||!1===o)return;const b=o[t.ObservableSymbol]?o[t.ObservableSymbol]():"function"==typeof o.subscribe?o:void 0;if(void 0===b){if("function"!=typeof o.render){if(Array.isArray(o)){if(0===o.length)return;for(let e=o.length-1;e>0;e--){const t=[void 0];s(o[e],t,u),void 0!==t[0]&&(u=t)}s(o[0],c,u)}else c[0]=e.insertBefore(o instanceof Node?o:new Text(o.toString()),u[0]),i.DestroyableElementSubscription.attach(c[0],n);}else o.render(e,c,u,function(e,t,i){r.push(n);try{s(e,t,i)}finally{r.pop()}});}else if(l){let e=!0,t=!0;const o={next:t=>{e&&(i.destroyRange(c[0],u[0]),c[0]=void 0),r.push(n);try{s(t,c,u,!1)}finally{r.pop()}(e=void 0!==c[0])||(c[0]=u[0])},complete(){const e=n.indexOf(l);-1===e?t=!1:n.splice(e,1)}},l=b.subscribe(o);t&&n.push(l)}}(s,[void 0],[void 0],!0)}t.attach=function e(...t){const s=Array.isArray(this)?this:r[r.length-1];if(void 0===s)throw new Error("`attach` can only be called in a component initializer.");for(let n=0;n<t.length;n++){const e=t[n];e instanceof Node&&(t[n]=new i.DestroyableElementSubscription(e,!0))}return s.push(...t),e.bind(s)},t.mount=function(e,s){if(void 0===s){const t=[];return o(s,e,t),{unsubscribe(){for(let e=0;e<t.length;e++)t[e].unsubscribe();t.length=0}}}let n=null;if(e[t.ObservableSymbol]().subscribe(e=>{const t=document.createElement("div"),s=[];if(o(t,e,s),1!==t.childElementCount)throw new Error("A mounted node must render exactly one element.");null!=n&&n.replaceWith(t.firstElementChild),n=t.firstElementChild;for(let n=0;n<s.length;n++)s[n].unsubscribe();s.length=0}),null==n)throw new Error("A mounted node must render exactly one element when it is subscribed to.");return n};class c{constructor(e,s){this.type=e,this.opts=s,this.elements=new Set,this.observers=new Set;const n=this.observers;this.eventListener=function(e){for(const t of n)("function"==typeof t?t:t.next)(e)},this[t.ObservableSymbol]=this[t.ObservableSymbol].bind(this),this.subscribe=this.subscribe.bind(this),this.connect=this.connect.bind(this)}[t.ObservableSymbol](){return this}subscribe(e){if(0===this.observers.size)for(const t of this.elements)t.addEventListener(this.type,this.eventListener,this.opts);return this.observers.add(e),{unsubscribe:()=>{if(this.observers.delete(e)&&0===this.observers.size)for(const e of this.elements)e.removeEventListener(this.type,this.eventListener,this.opts)}}}connect(e,t){this.elements.add(e),e.addEventListener(this.type,this.eventListener,this.opts),t({unsubscribe:()=>{this.elements.delete(e),e.removeEventListener(this.type,this.eventListener,this.opts)}})}}t.eventListener=function(e,t){return new c(e,t)};class u{constructor(e){this.input=e,this.eventListener=function(){e.next(this.value)},this.connect=this.connect.bind(this)}connect(e,s){e.addEventListener("change",this.eventListener),s(this.input[t.ObservableSymbol]().subscribe(t=>e.value=t),{unsubscribe:()=>e.removeEventListener("change",this.eventListener)})}}t.valueBinder=function(e){return new u(e)}},function(e,t,s){function n(e){var t,s=e.Symbol;return"function"==typeof s?s.observable?t=s.observable:(t=s("observable"),s.observable=t):t="@@observable",t}s.d(t,"a",function(){return n})},function(e,t,s){function n(e,t){if(null===e&&console.error("Bug detected: attempting to destroy a null node."),e.remove(),!e.disposeImplicitly&&!t)return;if(null==e.subscriptions)return;const s=e.subscriptions.splice(0);for(let n=0;n<s.length;n++)s[n].unsubscribe();e.dispatchEvent(new Event("destroy")),null!=e.ondestroy&&e.ondestroy()}Object.defineProperty(t,"__esModule",{value:!0}),s(0),t.destroy=n,t.destroyRange=function(e,t){if(null!=e&&t!==e){if(null==t){const t=e.parentElement;if(null==t){for(;null!=e;){const t=e.nextSibling;n(e,!1),e=t}return}for(;t.lastChild!==e;)n(t.lastChild,!1)}else for(;t.previousSibling!==e;)n(t.previousSibling,!1);n(e,!1)}},t.BuiltinObservable=class{constructor(){this.observers=new Set,this.isClosed=!1}get closed(){return this.isClosed}subscribe(e){if(!this.isClosed)return this.observers.add(e),1===this.observers.size&&this.subscribeToDependencies(),new class{constructor(e,t){this.obs=e,this.observer=t}unsubscribe(){const e=this.obs;e.observers.delete(this.observer)&&0===e.observers.size&&e.unsubscribeFromDependencies()}}(this,e)}next(e){this.observers.forEach(function(e){"object"==typeof e?e.next(this):e(this)},e)}complete(){0!==this.observers.size&&(this.isClosed=!0,this.observers.forEach(e=>"object"==typeof e&&e.complete()),this.observers.clear(),this.unsubscribeFromDependencies())}},t.SetRemovalSubscription=class{constructor(e,t){this.set=e,this.observer=t,e.add(t)}unsubscribe(){this.set.delete(this.observer)}};class i{constructor(e,t){this.element=e,this.dispose=t}unsubscribe(){n(this.element,this.dispose)}static attach(e,t,s=!1){"object"==typeof e.subscriptions&&t.push(new i(e,s))}}t.DestroyableElementSubscription=i},function(e,t,s){s.r(t),function(e,n){var i,r=s(1);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:n;var o=Object(r.a)(i);t.default=o}.call(this,s(4),s(5)(e))},function(e,t){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(e){"object"==typeof window&&(s=window)}e.exports=s},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),i=s(2);t.isSubject=function(e){return e instanceof r};class r{constructor(e){this.observers=new Set,this.v=e}[n.ObservableSymbol](){return this}get value(){return this.v}set value(e){if(this.v!==e){this.v=e;for(const t of this.observers)("function"==typeof t?t:t.next)(e)}}setUnderlyingValue(e){this.v=e}next(e){this.value=e}subscribe(e){return("function"==typeof e?e:e.next)(this.value),new i.SetRemovalSubscription(this.observers,e)}map(e,t){if(void 0===t)return new h(this,e);{let s=new r(e(this.v)),n=!0;return this.subscribe(t=>{n||(n=!0,s.next(e(t)),n=!1)}),s.subscribe(e=>{n||(n=!0,this.value=t(e),n=!1)}),n=!1,s}}}t.BuiltinSubject=r,t.subject=function(e){return new r(e)};class o{constructor(e){this.value=e}[n.ObservableSymbol](){return this}subscribe(e){return"function"==typeof e?e(this.value):(e.next(this.value),"function"==typeof e.complete&&e.complete()),{unsubscribe(){}}}}function c(e){return new o(e)}t.Constant=o,t.constant=c;class u extends i.BuiltinObservable{constructor(e,t,s){super(),this.dependencies=t,this.computation=s,this.subscriptions=[],this.value=void 0,this.value=e}[n.ObservableSymbol](){return this}subscribeToDependencies(){for(const e of this.dependencies.keys())this.subscriptions.push(e.subscribe(t=>{t!==this.dependencies.get(e)&&(this.dependencies.set(e,t),this.value=this.computation(e=>this.dependencies.get(e[n.ObservableSymbol]())),this.next(this.value))}))}unsubscribeFromDependencies(){const e=this.subscriptions.splice(0);for(let t=0;t<e.length;t++)e[t].unsubscribe()}subscribe(e){const t=super.subscribe(e);return("function"==typeof e?e:e.next)(this.value),t}}t.ComputeObservable=u;const l={};t.compute=function(e){const t=new Map,s=e(function(e,s){const i=e[n.ObservableSymbol]&&e[n.ObservableSymbol]();if(void 0===i)return e;if(t.has(i))return t.get(i);let r=l;if(i.subscribe(e=>r=e).unsubscribe(),r===l){if(1===arguments.length)throw new Error("The given observable stream did not provide a value in time for the computation.");r=s}return t.set(i,r),r});return 0===t.size?c(s):new u(s,t,e)};class b extends i.BuiltinObservable{constructor(e){super(),this.observables=e,this.subscriptions=[],this.values=new Array(e.length).fill(void 0)}[n.ObservableSymbol](){return this}subscribeToDependencies(){const e=this.observables;for(let t=0;t<e.length;t++){const s=t,i=e[s];void 0===i[n.ObservableSymbol]?this.values[s]=i:this.subscriptions.push(i[n.ObservableSymbol]().subscribe(e=>{this.values[s]=e,-1===this.values.indexOf(void 0)&&this.next(this.values)}))}}unsubscribeFromDependencies(){const e=this.subscriptions.splice(0);for(let t=0;t<e.length;t++)e[t].unsubscribe()}subscribe(e){return super.subscribe(e)}}t.CombineObservable=b,t.combine=function(...e){return new b(e)};class h extends i.BuiltinObservable{constructor(e,t){super(),this.source=e,this.map=t}[n.ObservableSymbol](){return this}subscribeToDependencies(){this.closed||(this.subscription=this.source[n.ObservableSymbol]().subscribe({next:e=>{this.next(this.map(e))},complete:()=>{this.complete()}}))}unsubscribeFromDependencies(){void 0!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}}t.Mapper=h,t.map=function(e,t){return new h(e,t)}}])});var z=function(){return z=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},z.apply(this,arguments)};function p(t){return this instanceof p?(this.v=t,this):new p(t)}o($C4gN$exports,{});o($VcCu$exports,{});var l={};Object.defineProperty(l,"__esModule",{value:!0});const q={en:"English",fr:"French",ja:"Japanese",ko:"Korean"};function s(e){const t=document.createElement("div");return t.innerHTML=e,[...t.childNodes]}function u(e){return function(t){setTimeout(()=>new e(t),1)}}function v({text:e,items:t,selected:c}){const a=b.eventListener("input");return b.attach(a.subscribe(e=>{c.next(e.target.value)})),b.h("div",{class:"mdc-select mdc-select--outlined",connect:u($jvQ9$export$MDCSelect)},b.h("i",{class:"mdc-select__dropdown-icon"}),b.h("select",{class:"mdc-select__native-control",connect:a},c.map(e=>Object.keys(t).map(c=>b.h("option",{value:c,selected:e===c},t[c])))),b.h("div",{class:"mdc-notched-outline"},b.h("div",{class:"mdc-notched-outline__leading"}),b.h("div",{class:"mdc-notched-outline__notch"},b.h("label",{class:"mdc-floating-label"},e)),b.h("div",{class:"mdc-notched-outline__trailing"})))}function A({store:e}){const t=b.eventListener("input"),c=new WeakMap;let a=!1,r=0;function $(t){let a=c.get(t);return void 0===a&&(a=d.compute(c=>t.from_language===c(e.languageFrom)&&t.learning_language===c(e.languageTo)&&(t.word.includes(c(e.searchQuery))||t.translations.includes(c(e.searchQuery)))?"block":"none"),c.set(t,a)),a}function l(){e.searchQuery.next(this.innerText)}return b.attach(t.subscribe(t=>{a||(a=!0,e.searchQuery.next(t.target.value),a=!1,0!==r&&clearTimeout(r),r=setTimeout(()=>{r=0,navigator.onLine&&e.addWords(e.searchQuery.value,e.languageTo.value,e.languageFrom.value)}))})),b.h("div",{class:"app"},b.h("div",{class:"header mdc-elevation--z4"},b.h("div",{class:"search-box mdc-text-field mdc-text-field--outlined",connect:u($Okkm$export$MDCTextField)},b.h("input",{type:"text",id:"tf-outlined",class:"mdc-text-field__input",connect:t,value:e.searchQuery}),b.h("div",{class:"mdc-notched-outline"},b.h("div",{class:"mdc-notched-outline__leading"}),b.h("div",{class:"mdc-notched-outline__notch"},b.h("label",{for:"tf-outlined",class:"mdc-floating-label"},"Search")),b.h("div",{class:"mdc-notched-outline__trailing"}))),b.h(v,{items:q,selected:e.languageFrom,text:"From"}),b.h(v,{items:q,selected:e.languageTo,text:"To"})),b.h("ul",{class:"items"},e.items.sync(e=>b.h("li",{class:"item mdc-elevation--z4",style:{display:$(e)}},b.h("div",{class:"item-content"},b.h("table",null,b.h("tr",{class:"from"},b.h("th",null,e.from_language_name),b.h("th",null,e.learning_language_name)),b.h("tr",{class:"to"},b.h("td",null,e.translations),b.h("td",null,e.word)),e.alternative_forms.map(e=>b.h("tr",null,b.h("td",null,s(e.translation)),b.h("td",null,s(e.example_sentence))))),0!==e.related_lexemes.length&&b.h("div",{class:"related"},e.related_lexemes.map(e=>b.h("div",null,b.h("a",{href:"#",onclick:l},e.anchor)))))))))}var B=A;l.App=B;var m,f={};!function(e,t){var s;"object"==typeof f?f=t():"function"==typeof m&&m.amd?m("ricochet",[],t):"object"==typeof f?(s=t(),f.ricochet=s):e.ricochet=t()}(window,function(){return function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=7)}([function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0});const n=s(3),r=s(2);t.ObservableSymbol=n.default,t.h=function(e,s,...n){let c,l,u=[];const b={subscriptions:u,disposeImplicitly:!s||!s.noimplicitdispose,destroy:e=>r.destroy(c,e)};i.push(u);try{if("string"==typeof e){const r=document.createElement(e),i=s;if(null!=i){for(const e in i){let s=null,n=!1;const o=i[e],c=null!=o&&void 0!==o[t.ObservableSymbol]?o[t.ObservableSymbol]():void 0,b="className"===e||"class"===e?e=>{Array.isArray(e)?e=e.join(" "):"object"==typeof e&&(e=Object.keys(e).filter(t=>e[t]).map(t=>e[t].toString()).join(" ")),r.className=e}:"style"===e?e=>{if(null!=s){for(let e=0;e<s.length;e++)s[e].unsubscribe();s.length=0}if("object"!=typeof e)return r.setAttribute("style",""+e);for(const n in e){const i=e[n],o=i[t.ObservableSymbol]&&i[t.ObservableSymbol]();o?(null==s&&(s=void 0===c?u:[]),s.push(o.subscribe(e=>r.style[n]=e))):r.style[n]=i}null==s||n||(u.push({unsubscribe(){s.forEach(e=>e.unsubscribe())}}),n=!0)}:"ref"===e?e=>{l=e}:t=>{r[e]=t};void 0!==c?u.push(c.subscribe(b)):b(o)}null!=i.children&&(n||(n=[])).unshift(i.children)}null!=n&&n.length>0&&o(r,n,u),c=Object.assign(r,b)}else{null!=n&&n.length>0&&(null==s?s={children:n}:null==s.children?s.children=n:s.children.push(...n)),"ref"in s&&(l=s.ref,delete s.ref);const t=e(s);if(null==t)throw new Error("Element returned by component was null.");for(const e in b)e in t||(t[e]=b[e]);u=t.subscriptions,c=t}if(s&&s.connect){const e=u.push.bind(u);if(Array.isArray(s.connect))for(const t of s.connect)("function"==typeof t?t:t.connect)(c,e);else("function"==typeof s.connect?s.connect:s.connect.connect)(c,e)}null!=l&&l(c)}finally{i.pop()}return c};const i=window.__ricochet_ctx_subscriptions||(window.__ricochet_ctx_subscriptions=[]);function o(e,s,n){!function s(o,c,l,u=!0){if(null==o||!1===o)return;const b=o[t.ObservableSymbol]?o[t.ObservableSymbol]():"function"==typeof o.subscribe?o:void 0;if(void 0===b){if("function"!=typeof o.render){if(Array.isArray(o)){if(0===o.length)return;for(let e=o.length-1;e>0;e--){const t=[void 0];s(o[e],t,l),void 0!==t[0]&&(l=t)}s(o[0],c,l)}else c[0]=e.insertBefore(o instanceof Node?o:new Text(o.toString()),l[0]),r.DestroyableElementSubscription.attach(c[0],n);}else o.render(e,c,l,function(e,t,r){i.push(n);try{s(e,t,r)}finally{i.pop()}});}else if(u){let e=!0,t=!0;const o={next:t=>{e&&(r.destroyRange(c[0],l[0]),c[0]=void 0),i.push(n);try{s(t,c,l,!1)}finally{i.pop()}(e=void 0!==c[0])||(c[0]=l[0])},complete(){const e=n.indexOf(u);-1===e?t=!1:n.splice(e,1)}},u=b.subscribe(o);t&&n.push(u)}}(s,[void 0],[void 0],!0)}t.attach=function e(...t){const s=Array.isArray(this)?this:i[i.length-1];if(void 0===s)throw new Error("`attach` can only be called in a component initializer.");for(let n=0;n<t.length;n++){const e=t[n];e instanceof Node&&(t[n]=new r.DestroyableElementSubscription(e,!0))}return s.push(...t),e.bind(s)},t.mount=function(e,s){if(void 0===s){const t=[];return o(s,e,t),{unsubscribe(){for(let e=0;e<t.length;e++)t[e].unsubscribe();t.length=0}}}let n=null;if(e[t.ObservableSymbol]().subscribe(e=>{const t=document.createElement("div"),s=[];if(o(t,e,s),1!==t.childElementCount)throw new Error("A mounted node must render exactly one element.");null!=n&&n.replaceWith(t.firstElementChild),n=t.firstElementChild;for(let n=0;n<s.length;n++)s[n].unsubscribe();s.length=0}),null==n)throw new Error("A mounted node must render exactly one element when it is subscribed to.");return n};class c{constructor(e,s){this.type=e,this.opts=s,this.elements=new Set,this.observers=new Set;const n=this.observers;this.eventListener=function(e){for(const t of n)("function"==typeof t?t:t.next)(e)},this[t.ObservableSymbol]=this[t.ObservableSymbol].bind(this),this.subscribe=this.subscribe.bind(this),this.connect=this.connect.bind(this)}[t.ObservableSymbol](){return this}subscribe(e){if(0===this.observers.size)for(const t of this.elements)t.addEventListener(this.type,this.eventListener,this.opts);return this.observers.add(e),{unsubscribe:()=>{if(this.observers.delete(e)&&0===this.observers.size)for(const e of this.elements)e.removeEventListener(this.type,this.eventListener,this.opts)}}}connect(e,t){this.elements.add(e),e.addEventListener(this.type,this.eventListener,this.opts),t({unsubscribe:()=>{this.elements.delete(e),e.removeEventListener(this.type,this.eventListener,this.opts)}})}}t.eventListener=function(e,t){return new c(e,t)};class l{constructor(e){this.input=e,this.eventListener=function(){e.next(this.value)},this.connect=this.connect.bind(this)}connect(e,s){e.addEventListener("change",this.eventListener),s(this.input[t.ObservableSymbol]().subscribe(t=>e.value=t),{unsubscribe:()=>e.removeEventListener("change",this.eventListener)})}}t.valueBinder=function(e){return new l(e)}},function(e,t,s){function n(e){var t,s=e.Symbol;return"function"==typeof s?s.observable?t=s.observable:(t=s("observable"),s.observable=t):t="@@observable",t}s.d(t,"a",function(){return n})},function(e,t,s){function n(e,t){if(null===e&&console.error("Bug detected: attempting to destroy a null node."),e.remove(),!e.disposeImplicitly&&!t)return;if(null==e.subscriptions)return;const s=e.subscriptions.splice(0);for(let n=0;n<s.length;n++)s[n].unsubscribe();e.dispatchEvent(new Event("destroy")),null!=e.ondestroy&&e.ondestroy()}Object.defineProperty(t,"__esModule",{value:!0}),s(0),t.destroy=n,t.destroyRange=function(e,t){if(null!=e&&t!==e){if(null==t){const t=e.parentElement;if(null==t){for(;null!=e;){const t=e.nextSibling;n(e,!1),e=t}return}for(;t.lastChild!==e;)n(t.lastChild,!1)}else for(;t.previousSibling!==e;)n(t.previousSibling,!1);n(e,!1)}},t.BuiltinObservable=class{constructor(){this.observers=new Set,this.isClosed=!1}get closed(){return this.isClosed}subscribe(e){if(!this.isClosed)return this.observers.add(e),1===this.observers.size&&this.subscribeToDependencies(),new class{constructor(e,t){this.obs=e,this.observer=t}unsubscribe(){const e=this.obs;e.observers.delete(this.observer)&&0===e.observers.size&&e.unsubscribeFromDependencies()}}(this,e)}next(e){this.observers.forEach(function(e){"object"==typeof e?e.next(this):e(this)},e)}complete(){0!==this.observers.size&&(this.isClosed=!0,this.observers.forEach(e=>"object"==typeof e&&e.complete()),this.observers.clear(),this.unsubscribeFromDependencies())}},t.SetRemovalSubscription=class{constructor(e,t){this.set=e,this.observer=t,e.add(t)}unsubscribe(){this.set.delete(this.observer)}};class r{constructor(e,t){this.element=e,this.dispose=t}unsubscribe(){n(this.element,this.dispose)}static attach(e,t,s=!1){"object"==typeof e.subscriptions&&t.push(new r(e,s))}}t.DestroyableElementSubscription=r},function(e,t,s){s.r(t),function(e,n){var r,i=s(1);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:n;var o=Object(i.a)(r);t.default=o}.call(this,s(4),s(5)(e))},function(e,t){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(e){"object"==typeof window&&(s=window)}e.exports=s},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(2);t.isSubject=function(e){return e instanceof i};class i{constructor(e){this.observers=new Set,this.v=e}[n.ObservableSymbol](){return this}get value(){return this.v}set value(e){if(this.v!==e){this.v=e;for(const t of this.observers)("function"==typeof t?t:t.next)(e)}}setUnderlyingValue(e){this.v=e}next(e){this.value=e}subscribe(e){return("function"==typeof e?e:e.next)(this.value),new r.SetRemovalSubscription(this.observers,e)}map(e,t){if(void 0===t)return new h(this,e);{let s=new i(e(this.v)),n=!0;return this.subscribe(t=>{n||(n=!0,s.next(e(t)),n=!1)}),s.subscribe(e=>{n||(n=!0,this.value=t(e),n=!1)}),n=!1,s}}}t.BuiltinSubject=i,t.subject=function(e){return new i(e)};class o{constructor(e){this.value=e}[n.ObservableSymbol](){return this}subscribe(e){return"function"==typeof e?e(this.value):(e.next(this.value),"function"==typeof e.complete&&e.complete()),{unsubscribe(){}}}}function c(e){return new o(e)}t.Constant=o,t.constant=c;class l extends r.BuiltinObservable{constructor(e,t,s){super(),this.dependencies=t,this.computation=s,this.subscriptions=[],this.value=void 0,this.value=e}[n.ObservableSymbol](){return this}subscribeToDependencies(){for(const e of this.dependencies.keys())this.subscriptions.push(e.subscribe(t=>{t!==this.dependencies.get(e)&&(this.dependencies.set(e,t),this.value=this.computation(e=>this.dependencies.get(e[n.ObservableSymbol]())),this.next(this.value))}))}unsubscribeFromDependencies(){const e=this.subscriptions.splice(0);for(let t=0;t<e.length;t++)e[t].unsubscribe()}subscribe(e){const t=super.subscribe(e);return("function"==typeof e?e:e.next)(this.value),t}}t.ComputeObservable=l;const u={};t.compute=function(e){const t=new Map,s=e(function(e,s){const r=e[n.ObservableSymbol]&&e[n.ObservableSymbol]();if(void 0===r)return e;if(t.has(r))return t.get(r);let i=u;if(r.subscribe(e=>i=e).unsubscribe(),i===u){if(1===arguments.length)throw new Error("The given observable stream did not provide a value in time for the computation.");i=s}return t.set(r,i),i});return 0===t.size?c(s):new l(s,t,e)};class b extends r.BuiltinObservable{constructor(e){super(),this.observables=e,this.subscriptions=[],this.values=new Array(e.length).fill(void 0)}[n.ObservableSymbol](){return this}subscribeToDependencies(){const e=this.observables;for(let t=0;t<e.length;t++){const s=t,r=e[s];void 0===r[n.ObservableSymbol]?this.values[s]=r:this.subscriptions.push(r[n.ObservableSymbol]().subscribe(e=>{this.values[s]=e,-1===this.values.indexOf(void 0)&&this.next(this.values)}))}}unsubscribeFromDependencies(){const e=this.subscriptions.splice(0);for(let t=0;t<e.length;t++)e[t].unsubscribe()}subscribe(e){return super.subscribe(e)}}t.CombineObservable=b,t.combine=function(...e){return new b(e)};class h extends r.BuiltinObservable{constructor(e,t){super(),this.source=e,this.map=t}[n.ObservableSymbol](){return this}subscribeToDependencies(){this.closed||(this.subscription=this.source[n.ObservableSymbol]().subscribe({next:e=>{this.next(this.map(e))},complete:()=>{this.complete()}}))}unsubscribeFromDependencies(){void 0!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}}t.Mapper=h,t.map=function(e,t){return new h(e,t)}},function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(2),i=s(6);class o{constructor(){this.locked=!1}lock(){return!this.locked&&(this.locked=!0)}unlock(){this.locked=!1}}class c extends Array{constructor(e,t,s,r){super(...e),this.data=e,this.source=t,this.observers=new Set,this.changeObservers=new Set,this.impl=this,this.isReadOnly=void 0!==t&&void 0===r,t&&t.impl&&(t=t.impl),this.length$$=new i.BuiltinSubject(e.length),this.length$=this.length$$.map(e=>e),this.change$={[n.ObservableSymbol]:()=>this.change$,subscribe:e=>(this.changeObservers.add(e),{unsubscribe:()=>{this.changeObservers.delete(e)}})},this.proxy=new Proxy(this,{get:(e,t)=>e.getProperty(t,e.isReadOnly),set:(e,t,s)=>e.setProperty(t,s)});const l=new o;void 0!==s&&c.mirror(t,this,s,l),void 0!==r&&c.mirror(this,t,r,l)}getProperty(e,t){const s=e;if("string"!=typeof s)return this.data[s];if("length"===s)return this.data.length;if(Number.isInteger(+s))return this.data[+s];let n=this[s];return"function"!=typeof n||c.prototype.hasOwnProperty(s)?n:["concat","entries","every","filter","find","findIndex","forEach","includes","indexOf","join","keys","lastIndexOf","length","map","reduce","reduceRight","slice","some","toLocaleString","toString","values"].includes(s)?Array.prototype[s].bind(this.data):t?(...e)=>Array.prototype[s].apply(function(e){return new Proxy(e,{set(){throw new Error("Cannot update readonly view.")}})}(this.data),e):function(){const e=[];for(const n of this.observers){const t=n[s];void 0===t?e.push(n):t(...arguments)}if(0===e.length&&0===this.changeObservers.size){const e=Array.prototype[s].apply(this.data,arguments);return this.data.length!==this.length$$.value&&this.length$$.next(this.data.length),e}const t=new Proxy(this.data,{set:(t,s,n)=>{if("length"===s)this.length$$.next(n);else if("number"==typeof s||"string"==typeof s&&Number.isInteger(+s)){const t=+s;e.forEach(e=>e.set(t,n)),this.changeObservers.forEach(e=>("function"==typeof e?e:e.next)([t,n]))}return t[s]=n,!0}});return Array.prototype[s].apply(t,arguments)}.bind(this)}setProperty(e,t){let s=e,n=t;if("length"===s)return this.data.length=n,this.length$$.next(n),!0;if("symbol"==typeof s)return this.data[s]=n,!0;if("string"==typeof s&&(s=+s),!Number.isInteger(s)||s<0||s>this.data.length)return!1;for(const r of this.changeObservers)("function"==typeof r?r:r.next)([s,n]);for(const r of this.observers)r.set(s,n);return this.data[s]=n,!0}sync(e,t){return new c(this.data.map(e),this,e,t).proxy}mapArray(e){return new class extends r.BuiltinObservable{constructor(e,t){super(),this.array=e,this.f=t}[n.ObservableSymbol](){return this}subscribeToDependencies(){this.subscription=this.array.change$.subscribe(()=>this.next(e(this.array.data)))}unsubscribeFromDependencies(){this.subscription.unsubscribe()}}(this,e)}swap(e,t){const s=this.data[e];this.proxy[e]=this.data[t],this.proxy[t]=s}observe(e,t){return this.observers.add(e),t&&("function"==typeof e.push?e.push(...this.data):this.data.forEach((t,s)=>e.set(s,t))),{unsubscribe:()=>{this.observers.delete(e)}}}render(e,t,s,i){const o=t,c=s,l=[],u=(e,t,...s)=>{if(e<0)throw new Error;void 0===t&&(t=l.length-e);let n=l[e]||c,o=l[e+t]||c;if(t>0&&r.destroyRange(n[0],o[0]),0===s.length)return l.splice(e,t);const u=new Array(s.length);for(let r=s.length-1;r>=0;r--){const e=[void 0];i(s[r],e,o),void 0!==e[0]&&(o=e),u[r]=e}l.splice(e,t,...u)};n.attach(this.observe({set:(e,t)=>{if(void 0===l[e]){const s=0===e?o:[void 0];return l[e]=s,void i(t,s,c)}const s=l[e],n=l[e+1]||c;r.destroyRange(s[0],n[0]),void 0===t?l[e]=n:i(t,s,n)},splice:u,pop:()=>{const e=l.pop(),t=c;r.destroyRange(e[0],t[0])},shift:()=>{const e=l.shift(),t=l[0]||c;r.destroyRange(e[0],t[0])},push:(...e)=>{u(l.length,0,...e)},unshift:(...e)=>{u(0,0,...e)},reverse:()=>{if(l.length<2)return;l.reverse();for(let t=0;t<l.length-1;t++){let e=l[t][0],s=l[t+1][0];for(;e!=s;){const t=e;e=e.previousSibling,t.parentElement.insertBefore(t,void 0)}}let e=l[l.length-1][0];for(;null!=e;){const t=e;e=e.previousSibling,t.parentElement.insertBefore(t,void 0)}},swap:(e,t)=>{if(e===t)return;const s=l[e],n=l[t];let r=s[0],i=n[0];const o=(l[e+1]||c)[0],u=(l[t+1]||c)[0];for(;r!=o;){const e=r;r=r.nextSibling,e.parentElement.insertBefore(e,u)}for(;i!=s[0];){const e=i;i=i.nextSibling,e.parentElement.insertBefore(e,o)}const b=s[0];s[0]=n[0],n[0]=b}},!0))}static mirror(e,t,s,n){return e.observe({set(e,r){n.lock()&&(t.setProperty(e,s(r,e)),n.unlock())},splice(e,r,...i){n.lock()&&(t.getProperty("splice",!1)(e,r,...i.map(s)),n.unlock())},pop(){n.lock()&&(t.getProperty("pop",!1)(),n.unlock())},shift(){n.lock()&&(t.getProperty("shift",!1)(),n.unlock())},push(...e){n.lock()&&(t.getProperty("push",!1)(...e.map(s)),n.unlock())},unshift(...e){n.lock()&&(t.getProperty("unshift",!1)(...e.map(s)),n.unlock())},reverse(){n.lock()&&(t.getProperty("reverse",!1)(),n.unlock())},swap(e,s){n.lock()&&(t.getProperty("swap",!1)(e,s),n.unlock())},fill(e,r,i){if(n.lock()){void 0===r&&(r=0),void 0===i&&(i=t.length);for(let n=r;n<i;n++)t.setProperty(n,s(e,n));n.unlock()}}})}}t.isObservableArray=function(e){return e instanceof c},t.observableArray=function(...e){return new c(e).proxy}}])});class n{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbp=new Promise((r,o)=>{const $=indexedDB.open(e,1);$.onerror=()=>o($.error),$.onsuccess=()=>r($.result),$.onupgradeneeded=()=>{$.result.createObjectStore(t)}})}_withIDBStore(e,t){return this._dbp.then(r=>new Promise((o,$)=>{const s=r.transaction(this.storeName,e);s.oncomplete=()=>o(),s.onabort=s.onerror=()=>$(s.error),t(s.objectStore(this.storeName))}))}}let r;function g(){return r||(r=new n),r}function h(e,t=g()){let r;return t._withIDBStore("readonly",t=>{r=t.get(e)}).then(()=>r.result)}function i(e,t,r=g()){return r._withIDBStore("readwrite",r=>{r.put(t,e)})}function t(e,t=g()){return t._withIDBStore("readwrite",t=>{t.delete(e)})}function w(e=g()){return e._withIDBStore("readwrite",e=>{e.clear()})}function x(e=g()){const t=[];return e._withIDBStore("readonly",e=>{(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}}).then(()=>t)}var e={},a=e&&e.__awaiter||function(e,i,t,r){return new(t||(t=Promise))(function(a,o){function n(e){try{$(r.next(e))}catch(i){o(i)}}function s(e){try{$(r.throw(e))}catch(i){o(i)}}function $(e){e.done?a(e.value):new t(function(i){i(e.value)}).then(n,s)}$((r=r.apply(e,i||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});class C{constructor(){this.itemsStore=new n("items"),this.completionsStore=new n("completions"),this.items=f.observableArray(),this.completions=f.observableArray(),this.languageFrom=d.subject(""),this.languageTo=d.subject(""),this.searchQuery=d.subject("")}init(){return a(this,void 0,void 0,function*(){this.languageFrom.next((yield h("language-from"))||"en"),this.languageTo.next((yield h("language-to"))||"fr"),this.searchQuery.next((yield h("search-query"))||""),this.languageFrom.subscribe(e=>i("language-from",e)),this.languageTo.subscribe(e=>i("language-to",e)),this.searchQuery.subscribe(e=>i("search-query",e)),this.items.push(...(yield Promise.all((yield x(this.itemsStore)).map(e=>h(e,this.itemsStore))))),this.completions.push(...(yield Promise.all((yield x(this.completionsStore)).map(e=>h(e,this.completionsStore)))))})}findDictionaryItem(e,i){return a(this,void 0,void 0,function*(){const t=this.items.find(i=>i.lexeme_id===e);if(void 0!==t)return t;try{const t=yield fetch(`https://${i}.duolingo.com/api/1/dictionary_page?lexeme_id=${e}`,{headers:{Cookie:`lang=${i}`}});return yield t.json()}catch(r){return`Could not find vocabulary information for ID ${e}.`}})}findIds(e,i,t){return a(this,void 0,void 0,function*(){const r=this.completions.find(r=>r.word===e&&r.languageId===i&&r.uiLanguageId===t);if(void 0!==r)return r;try{const r=yield fetch(`https://duolingo-lexicon-prod.duolingo.com/api/1/complete?languageId=${i}&query=${e}&uiLanguageId=${t}`),o=yield r.json();return Object.assign(o,{word:e,languageId:i,uiLanguageId:t})}catch(a){return`Could not find completions for word ${e}.`}})}addWords(e,i,t){return a(this,void 0,void 0,function*(){e=e.trim().toLowerCase();const r=this.completions.find(r=>r.word===e&&r.languageId===i&&r.uiLanguageId===t);if(void 0!==r)return r;const a=yield this.findIds(e,i,t);if("string"==typeof a)return a;yield this.addCompletion(a);const o=[...(yield Promise.all(a[t].map(e=>this.findDictionaryItem(e.lexemeId,e.matchedLanguageId)))),...(yield Promise.all(a[i].map(e=>this.findDictionaryItem(e.lexemeId,e.matchedLanguageId))))];for(const e of o){if("string"==typeof e)continue;void 0===this.items.find(i=>i.lexeme_id===e.lexeme_id)&&(yield this.addWord(e))}return o.filter(e=>"string"==typeof e).join(" ")||void 0})}addCompletion(e){return a(this,void 0,void 0,function*(){this.completions.push(e),yield i(`${e.word}/${e.languageId}/${e.uiLanguageId}`,e,this.completionsStore)})}removeCompletion(e){return a(this,void 0,void 0,function*(){const i=this.completions.findIndex(i=>i.word===e.word&&i.languageId===e.languageId&&i.uiLanguageId===e.uiLanguageId);-1!==i&&this.completions.splice(i,1),yield t(`${e.word}/${e.languageId}/${e.uiLanguageId}`,this.completionsStore)})}addWord(e){return a(this,void 0,void 0,function*(){this.items.push(e),yield i(e.lexeme_id,e,this.itemsStore)})}removeWord(e){return a(this,void 0,void 0,function*(){const i=this.items.findIndex(i=>i.lexeme_id===e.lexeme_id);-1!==i&&this.items.splice(i,1),yield t(e.lexeme_id,this.itemsStore)})}reset(){return a(this,void 0,void 0,function*(){this.items.splice(0),this.completions.splice(0),yield w(this.itemsStore),yield w(this.completionsStore)})}}var y=C;e.Store=y;var c={},D=c&&c.__awaiter||function(e,r,o,t){return new(o||(o=Promise))(function(n,i){function c(e){try{a(t.next(e))}catch(r){i(r)}}function $(e){try{a(t.throw(e))}catch(r){i(r)}}function a(e){e.done?n(e.value):new o(function(r){r(e.value)}).then(c,$)}a((t=t.apply(e,r||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0});if(navigator.serviceWorker){const e="/service-worker.js";navigator.serviceWorker.register(e).then(()=>console.log("Service worker registered.")).catch(e=>console.warn("Service worker could not be registered.",e))}!function(){D(this,void 0,void 0,function*(){const e=document.getElementById("app"),r=window.store=new y;yield r.init(),e.appendChild(b.h(l.App,{store:r}))})}();if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=c}else if(typeof define==="function"&&define.amd){define(function(){return c})}return{"zo2T":c};});